(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{6249:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users",function(){return t(1246)}])},4090:function(e,a,t){"use strict";t.d(a,{i:function(){return l}});let l=e=>{let a=new Date(e),t=a.toLocaleString("en-US",{day:"2-digit",month:"2-digit",year:"numeric",hour12:!0});return t}},1246:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return A}});var l=t(5893),s=t(7294),r=t(9473),n=t(5049),i=t(4090),o=t(3023),c=t(5675),d=t.n(c),m=t(6704),p=t(5379),u=t(8711),h=t(7435),x=t(4779),j=t(5292),v=t(2175),N=t(3408),g=t(4138),b=t(6310),f=t(1800),_=e=>new Promise((a,t)=>{let l=new FileReader;l.readAsDataURL(e),l.onload=()=>{var e;return a((null===(e=l.result)||void 0===e?void 0:e.toString())||"")},l.onerror=()=>t(l.error)}),y=t(1192),P=t(8576),w=t(4149),Z=t.n(w),S=t(7054),z=t(8837),L=e=>{let{onSelect:a}=e,[t,r]=(0,s.useState)(""),n=async e=>{let t=await (0,z.NU)(e),l=await (0,z.WV)(t[0]);a(l)};return(0,l.jsx)(z.ZP,{value:t,onChange:e=>{r(e)},onSelect:n,children:e=>{let{getInputProps:a,suggestions:t,getSuggestionItemProps:r,loading:n}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)("input",{...a({placeholder:"Search Places ...",className:"location-search-input"}),className:"form-control-alternative form-control w-100"}),(0,l.jsxs)("div",{className:"autocomplete-dropdown-container ms-2",children:[n&&(0,l.jsx)("div",{children:"Loading..."}),t.map(e=>(0,s.createElement)("div",{...r(e),key:e.placeId,className:" px-2 mb-1 mt-1 form-control"},e.description))]})]})}})},C=t(395),E=e=>{let{setCoordinates:a,Coordinates:t}=e,{isLoaded:s}=(0,S.Ji)({id:"google-map-script",googleMapsApiKey:"AIzaSyCbPes_VIdvLQrYJrtNEbni0Epjbl42qGA"});return s?(0,l.jsx)(C.Z,{defaultActiveKey:"1",children:(0,l.jsxs)(C.Z.Item,{eventKey:"0",children:[(0,l.jsx)(C.Z.Header,{children:"map"}),(0,l.jsx)(C.Z.Body,{children:(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsxs)("div",{className:"mt-2 mb-2",children:[(0,l.jsx)("label",{htmlFor:"",className:'className="form-control-label"',children:"Search you location"}),(0,l.jsx)(L,{onSelect:e=>{a(e),console.log(e)}})]}),(0,l.jsx)("div",{style:{height:"300px",width:"100%"},children:(0,l.jsx)(S.b6,{mapContainerStyle:{height:"100%",width:"100%"},center:{lat:(null==t?void 0:t.lat)||22,lng:(null==t?void 0:t.lng)||78},zoom:t?13:2,options:{zoomControl:!0},onClick:e=>{var t,l;let s=null===(t=e.latLng)||void 0===t?void 0:t.lat(),r=null===(l=e.latLng)||void 0===l?void 0:l.lng();a({lat:s||0,lng:r||0})},children:t&&(0,l.jsx)(S.Jx,{position:t})})})]})})]})}):null},k=e=>{let a=(0,r.v9)(e=>{var a;return null===(a=e.login.userToken)||void 0===a?void 0:a.role}),{id:t,onClose:n,isActive:i,data:o,type:c,urls:m,path:u}=e,[h,w]=(0,s.useState)(c==p.P7?{lat:22,lng:78}:{lat:((null==o?void 0:o.coordinates)||[])[0]||22,lng:((null==o?void 0:o.coordinates)||[])[1]||78}),S={first_name:b.Z_().required("First Name is required").min(2,"First Name must be at least 2 characters").max(50,"First Name can be at most 50 characters"),last_name:b.Z_().required("Last Name is required").min(2,"Last Name must be at least 2 characters").max(50,"Last Name can be at most 50 characters"),email:b.Z_().required("Email is required").email("Invalid email format").max(100,"Email can be at most 100 characters"),password:b.Z_().optional(),role:b.Z_().required("Role is required"),contact_number:b.Z_().required("Phone Number is required").min(10,"Phone Number must be at least 10 digits").max(10,"Phone Number can be at most 10 digits").matches(/^[0-9]+$/,"Phone Number must contain only digits"),zip_code:b.Rx().required("Zip Code is required"),local_area:b.IX().of(b.Rx()).optional(),city:b.Z_().required("City is required"),state:b.Z_().required("State is required")},[z,L]=(0,s.useState)(""),[C,k]=(0,s.useState)(),[q]=(0,s.useState)({first_name:c==p.P7?"":o.first_name,last_name:c==p.P7?"":o.last_name,email:c==p.P7?"":o.email,role:c==p.P7?"":o.role,contact_number:c==p.P7?"":o.contact_number,password:c==p.P7?"":o.password,zip_code:c==p.P7?480001:o.zip_code,local_area:c==p.P7?[]:o.local_area,city:c==p.P7?"":o.city,state:c==p.P7?"":o.state,address:c==p.P7?"":o.address,coordinates:c==p.P7?{lat:22,lng:78}:{lat:((null==o?void 0:o.coordinates)||[])[0]||22,lng:((null==o?void 0:o.coordinates)||[])[1]||78}}),B=(0,r.I0)(),F=e=>{var a,t;if(null==e?void 0:null===(t=e.target)||void 0===t?void 0:null===(a=t.files)||void 0===a?void 0:a.length){if(e.target.files[0].size>p.ul)e.target.value="",(0,f.ZP)(f.vU,"Image size should not exceed 1 MB.");else{let File=e.target.files[0];k(File),_(File).then(e=>L(e))}}},A=async e=>{B((0,j.N)(!0));try{let a;let t=new FormData;C&&(t.append("image",C),c===p.bk&&t.append("oldImage",o.image)),t.append("first_name",e.first_name.trim()),t.append("last_name",e.last_name.trim()),t.append("email",e.email.trim()),t.append("role",e.role.toString()),t.append("contact_number",e.contact_number),e.password&&t.append("password",e.password.trim()),t.append("zip_code",e.zip_code),(e.local_area||[]).map(e=>{t.append("local_area[]",e)}),Object.values(h).map(e=>{t.append("coordinates[]",e)}),t.append("city",e.city.trim()),t.append("state",e.state.trim()),a=c===p.P7?await x.Z.post(m,t,0,!0):await x.Z.put(m,t,o._id,!0),200==a.status&&(B((0,j.N)(!1)),B((0,y.d)(!0)),k(null),L(""),n(""))}catch(e){console.log(e),B((0,j.N)(!1))}finally{B((0,j.N)(!1))}};return(0,l.jsxs)(g.Z,{show:i,onHide:()=>n(""),dialogClassName:"modal-lg bg-glass",style:{marginLeft:"23px"},backdrop:"static",children:[(0,l.jsx)(g.Z.Header,{closeButton:!0,children:(0,l.jsx)(g.Z.Title,{children:(0,l.jsxs)("h3",{children:[" ",c==p.P7?"Add ":"Edit "," ",u]})})}),(0,l.jsx)(g.Z.Body,{children:(0,l.jsx)(v.J9,{enableReinitialize:!0,onSubmit:A,initialValues:q,validationSchema:b.Ry().shape(S),children:e=>{let{values:t,setValues:s}=e;return(0,l.jsxs)(v.l0,{children:[(0,l.jsxs)("div",{className:"d-flex gap-column justify-content-between ",children:[(0,l.jsxs)("div",{className:"avatar-upload mb-3 ",children:[(0,l.jsxs)("div",{className:"avatar-edit",children:[(0,l.jsx)("input",{type:"file",id:"imageUpload",accept:".png, .jpg, .jpeg",onChange:F}),(0,l.jsx)("label",{htmlFor:"imageUpload"})]}),(0,l.jsx)("div",{className:"position-relative avatar-preview",children:(0,l.jsx)(d(),{src:c==p.P7?z||"/assets/img/profile.png":z||o.image||"/assets/img/profile.png",alt:"profile Image",width:200,height:200,className:"rounded-circle object-fit-cover"})})]}),(0,l.jsxs)("div",{className:"w-50",children:[(0,l.jsxs)("div",{className:"w-100",children:[(0,l.jsx)(N.Z.Label,{className:"form-control-label",children:(0,l.jsx)("h6",{children:"First Name"})}),(0,l.jsx)(v.gN,{type:"text",id:"first_name",placeholder:"First Name",name:"first_name",className:"form-control-alternative form-control w-100"}),(0,l.jsx)(v.Bc,{className:"text-danger",name:"first_name",component:"div"})]}),(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(N.Z.Label,{className:"form-control-label",children:(0,l.jsx)("h6",{children:"Last Name"})}),(0,l.jsx)(v.gN,{type:"text",placeholder:"Last Name",id:"last_name",name:"last_name",className:"form-control-alternative form-control "}),(0,l.jsx)(v.Bc,{className:"text-danger",name:"last_name",component:"div"})]}),(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(N.Z.Label,{className:"form-control-label",children:(0,l.jsx)("h6",{children:"Email"})}),(0,l.jsx)(v.gN,{type:"email",placeholder:"Email",name:"email",id:"email",disabled:c!==p.P7,className:"form-control-alternative form-control "}),(0,l.jsx)(v.Bc,{className:"text-danger",name:"email",component:"div"})]})]})]}),(0,l.jsxs)("div",{className:"d-flex gap-column justify-content-between ",children:[(0,l.jsxs)("div",{className:"w-50",children:[(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(N.Z.Label,{className:"form-control-label",children:(0,l.jsx)("h6",{children:"Phone Number"})}),(0,l.jsx)(v.gN,{type:"number",placeholder:"phone Number",name:"contact_number",id:"contact_number",className:"form-control-alternative form-control"}),(0,l.jsx)(v.Bc,{className:"text-danger",name:"contact_number",component:"div"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)(N.Z.Label,{className:"form-control-label",children:(0,l.jsx)("h6",{children:"Role"})}),(0,l.jsx)(v.gN,{as:"select",name:"role",id:"role",className:"form-control-alternative form-control",children:"admin"===a?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("option",{value:"",selected:!0,disabled:!0,hidden:!0,children:"select role"}),p.$Y.map((e,a)=>(0,l.jsx)("option",{value:p.Wn[e],children:p.Wn[e].toUpperCase()},a))]}):(0,l.jsx)("option",{selected:!0,value:"user",children:"USER"})}),(0,l.jsx)(v.Bc,{className:"text-danger",name:"role",component:"div"})]}),"broker"==t.role&&(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(N.Z.Label,{className:"form-control-label",children:(0,l.jsx)("h6",{children:"Area (press Enter to add zip)"})}),(0,l.jsx)(Z(),{value:t.local_area||[],onChange:e=>{s({...t,local_area:e})},inputProps:{placeholder:"zip codes"}}),(0,l.jsx)(v.Bc,{name:"local_area",component:"div"})]}),c==p.P7&&(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(N.Z.Label,{className:"form-control-label",children:(0,l.jsx)("h6",{children:"zip codes"})}),(0,l.jsx)(v.gN,{type:"text",id:"zip_code",name:"zip_code",placeholder:"Enter zip codes",className:"form-control-alternative form-control "}),(0,l.jsx)(v.Bc,{name:"zip_code",component:"div"})]})]}),(0,l.jsxs)("div",{className:"w-50",children:[c==p.P7&&(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(N.Z.Label,{className:"form-control-label",children:(0,l.jsx)("h6",{children:"Password"})}),(0,l.jsx)(v.gN,{type:"password",placeholder:"Password",id:"password",name:"password",className:"form-control-alternative form-control "}),(0,l.jsx)(v.Bc,{className:"text-danger",name:"password",component:"div"})]}),(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(N.Z.Label,{className:"form-control-label",children:(0,l.jsx)("h6",{children:"State"})}),(0,l.jsx)(P.ZP,{id:"state",placeholder:"State",name:"state",options:p.LX||{value:"",lable:""},className:"form-control-alternative form-control ",defaultValue:{value:t.state,label:t.state},onChange:e=>s({...t,state:e?e.value:""})}),(0,l.jsx)(v.Bc,{name:"state",component:"div"})]}),(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(N.Z.Label,{className:"form-control-label",children:(0,l.jsx)("h6",{children:"City"})}),(0,l.jsx)(v.gN,{type:"city",placeholder:"city",id:"city",name:"city",className:"form-control-alternative form-control "}),(0,l.jsx)(v.Bc,{className:"text-danger",name:"city",component:"div"})]}),c!==p.P7&&(0,l.jsxs)("div",{className:"",children:[(0,l.jsx)(N.Z.Label,{className:"form-control-label",children:(0,l.jsx)("h6",{children:"zip codes"})}),(0,l.jsx)(v.gN,{type:"text",id:"zip_code",name:"zip_code",placeholder:"Enter zip codes",className:"form-control-alternative form-control "}),(0,l.jsx)(v.Bc,{name:"zip_code",component:"div"})]})]})]}),(0,l.jsx)("div",{className:"",children:(0,l.jsx)(E,{setCoordinates:w,Coordinates:h})}),(0,l.jsx)("div",{className:"w-100 d-flex justify-content-center",children:(0,l.jsxs)("button",{type:"submit",className:"btn btn-primary mt-5 d-block text-uppercase",children:[c==p.P7?"Add ":"Update ",u]})})]})}})})]})},q=t(1163);let B=["first_name","last_name","email","role","zip_code","state","city"],F=e=>{let{data:a}=e;return(0,l.jsxs)("div",{className:"d-flex px-2 py-1",children:[(0,l.jsx)("div",{children:(0,l.jsx)(d(),{src:a.url||"/img/profile.png",alt:"user1",width:36,height:36,className:"avatar avatar-sm me-3"})}),(0,l.jsxs)("div",{className:"text-left",children:[(0,l.jsx)("h6",{className:"text-left",children:"".concat(a.first_name||""," ").concat(a.last_name||"")}),(0,l.jsx)("p",{className:"text-left text-xs text-secondary mb-0",children:"".concat(a.email)})]})]})};var A=()=>{var e;let a="user";h.Z.path=a;let t=(0,r.I0)();(0,q.useRouter)();let c=(0,r.v9)(e=>{var a;return null===(a=e.login.userToken)||void 0===a?void 0:a.token}),{recallApi:d}=(0,r.v9)(e=>e.recallApi),[x,j]=(0,s.useState)(p.Wh),[v,N]=(0,s.useState)({list:[],pagination:{}}),[g,b]=(0,s.useState)(1),[f,_]=(0,s.useState)({}),[y,P]=(0,s.useState)("");(0,s.useEffect)(()=>{h.Z.get(g,x,N)},[x,c,t,g,d]);let w=[{value:"S.No",index:!0},{value:"User",component:F},{value:"Address",key:"address"},{key:"phone_number",value:"Phone Number"},{value:"Role",component:e=>{let{data:a}=e;return(0,l.jsxs)(l.Fragment,{children:[a.role," "]})}},{value:"Created At",component:e=>{let{data:a}=e;return(0,l.jsx)(l.Fragment,{children:(0,i.i)(a.created_at)})}},{value:"Status",combine:["is_active"],component:e=>{let{data:a}=e;return(0,l.jsx)(o.OF,{data:a})}},{value:"Action",combine:["user_id"],component:e=>{let{data:a}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(o.EY,{data:a,setSelected:_,setEdit:P,id:a._id})})},className:"d-flex "}];return(0,l.jsxs)(l.Fragment,{children:[(y===p.P7||y===p.bk)&&(0,l.jsx)(k,{id:f.user_id||0,isActive:y===p.P7||y===p.bk,onClose:P,data:{...f,id:f.user_id},type:y==p.P7?p.P7:p.bk,urls:y==p.P7?"".concat(a,"/signUp"):"".concat(a,"/update"),path:a}),(0,l.jsx)("div",{className:"card bg-glass",style:{overflowX:"hidden"},children:(0,l.jsx)("div",{className:"card-datatable ",children:(0,l.jsxs)("div",{className:"dataTables_wrapper dt-bootstrap5",children:[(0,l.jsx)(u.ZP,{title:"".concat(a),onAddClick:()=>P(p.P7),onExportClick:()=>{h.Z.download()},disable:[u.bi]}),(0,l.jsx)(n.ZP,{filter:x,setFilter:j,disable:[n.e_,n.dd],orderBy:B}),(0,l.jsx)(o.ZP,{tableCustomize:w,data:v&&v.list||[],StartIndex:+x.limit*(+g-1)+1||1}),(0,l.jsx)(m.Z,{currentPage:g,limit:x.limit,setCurrentPage:b,total:(null===(e=v.pagination)||void 0===e?void 0:e.total)||0})]})})})]})}}},function(e){e.O(0,[86,255,743,138,752,116,657,291,774,888,179],function(){return e(e.s=6249)}),_N_E=e.O()}]);