(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{71:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/payment",function(){return n(7497)}])},4090:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});let a=e=>{let t=new Date(e),n=t.toLocaleString("en-US",{day:"2-digit",month:"2-digit",year:"numeric",hour12:!0});return n}},907:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});var a=n(5893),r=n(4779),i=n(5292),l=n(2175);n(7294);var o=n(4138),s=n(9473),c=n(5379),d=n(1192);t.Z=e=>{let{id:t,onClose:n,isActive:u,type:m,urls:p,path:h,form:y=!0,formData:j=!1,validationSchema:v,initValue:x,onSuccess:f,onError:b,addValue:g,addFiles:N,deleteValue:_}=e.config,k=e.children,P=(0,s.I0)(),Z=async e=>{P((0,i.N)(!0)),(_||[]).map(t=>delete e[t]);try{let a;let l=e={...e,...g};j&&(l=new FormData,N&&Object.keys(N).map(e=>{l.append(e,N[e])}),(Object.keys({...e,...g||{}})||[]).map(t=>{"object"!=typeof e[t]?l.append(t,e[t]):null!=e[t]&&(Object.keys(e[t])||[]).map(n=>{"object"==typeof e[t][n]?(Object.keys(e[t][n])||[]).map(a=>{l.append("".concat(t,"[").concat(a,"][]"),e[t][n][a])}):l.append("".concat(t,"[]"),e[t][n])})})),a=m===c.bk?await r.Z.put(p,l,t,!0):await r.Z.post(p,l,0,!0),200==a.status&&(P((0,i.N)(!1)),P((0,d.d)(!0)),n(""),f&&f())}catch(e){console.log(e),b&&b(),P((0,i.N)(!1))}finally{P((0,i.N)(!1))}};return(0,a.jsxs)(o.Z,{show:u,onHide:()=>n(""),dialogClassName:"modal-lg bg-glass",style:{marginLeft:"23px"},backdrop:"static",children:[(0,a.jsx)(o.Z.Header,{closeButton:!0,children:(0,a.jsx)(o.Z.Title,{children:(0,a.jsx)("h3",{children:h})})}),(0,a.jsx)(o.Z.Body,{children:y?(0,a.jsx)(l.J9,{enableReinitialize:!0,onSubmit:Z,initialValues:x,validationSchema:v,children:t=>(0,a.jsx)(l.l0,{children:"function"==typeof e.children?e.children(t):"turn on form true"})}):k})]})};let u=(e,t)=>{let{type:n,data:a}=e,r={};return t.forEach(e=>{r[e]=n===c.P7?"":a[e]||""}),r}},7497:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var a=n(5893),r=n(7294),i=n(9473),l=n(5049),o=n(3023),s=n(6704),c=n(5379),d=n(8711),u=n(7435),m=n(907),p=n(6310),h=n(2175),y=e=>{let t=p.Ry({amount:p.Rx().required("Amount is required"),currency:p.Z_().required("Currency is required"),description:p.Z_(),payment_method:p.Z_().required("Payment method is required"),type:p.Rx().oneOf([1,2],"Type must be either 1 (credit) or 2 (debit)").required("Payment type is required")}),n=(0,m.A)(e,["amount","currency","description","payment_method","type"]);return(0,a.jsx)(m.Z,{config:{...e,initValue:n,validationSchema:t,formData:!1},children:e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"amount",children:"Amount"}),(0,a.jsx)(h.gN,{name:"amount",type:"number",className:"form-control-alternative form-control field-input"}),(0,a.jsx)(h.Bc,{name:"amount",component:"div"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"currency",children:"Currency"}),(0,a.jsxs)(h.gN,{name:"currency",as:"select",className:"form-control-alternative form-control field-input",children:[(0,a.jsx)("option",{value:"",children:"Select Currency"}),c.sR.map((e,t)=>(0,a.jsx)("option",{value:e,children:c.vG[e]},e))]}),(0,a.jsx)(h.Bc,{name:"currency",component:"div"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description",children:"Description"}),(0,a.jsx)(h.gN,{name:"description",as:"textarea",className:"form-control-alternative form-control field-input"}),(0,a.jsx)(h.Bc,{name:"description",component:"div"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"payment_method",children:"Payment Method"}),(0,a.jsxs)(h.gN,{name:"payment_method",as:"select",className:"form-control-alternative form-control field-input",children:[(0,a.jsx)("option",{value:"",children:"Select Payment Method"}),c.e4.map((e,t)=>(0,a.jsx)("option",{value:e,children:c.N4[e]},e))]}),(0,a.jsx)(h.Bc,{name:"payment_method",component:"div"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"type",children:"Type"}),(0,a.jsxs)(h.gN,{name:"type",as:"select",className:"form-control-alternative form-control field-input",children:[(0,a.jsx)("option",{value:"",children:"Select Payment Type"}),c.W2.map(e=>(0,a.jsx)("option",{value:e,children:c.dl[e]},e))]}),(0,a.jsx)(h.Bc,{name:"type",component:"div"})]}),(0,a.jsx)("div",{children:(0,a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]})})},j=n(4090);let v=["name","email","message","type","status"];var x=()=>{var e;let t="payments";u.Z.path=t;let n=(0,i.I0)(),m=(0,i.v9)(e=>{var t;return null===(t=e.login.userToken)||void 0===t?void 0:t.token}),{recallApi:p}=(0,i.v9)(e=>e.recallApi),[h,x]=(0,r.useState)(c.Wh),[f,b]=(0,r.useState)({list:[],pagination:{total:0}}),[g,N]=(0,r.useState)(1),[_,k]=(0,r.useState)({}),[P,Z]=(0,r.useState)("");(0,r.useEffect)(()=>{u.Z.get(g,h,b)},[h,m,n,g,p]);let S=[{value:"S.No",index:!0},{value:"Payment Id",key:"id"},{key:"work_id",value:"Work id"},{value:"Payment",key:"amount"},{value:"Currency",key:"currency"},{value:"type",component:e=>{let{data:t}=e;return(0,a.jsx)("div",{className:(null==t?void 0:t.type)=="1"?"green":"red",children:c.dl[null==t?void 0:t.type]})}},{value:"method",component:e=>{let{data:t}=e;return(0,a.jsx)("div",{children:c.N4[null==t?void 0:t.payment_method]})}},{value:"message",key:"description"},{value:"status",component:e=>{let{data:t}=e;return(0,a.jsx)("div",{children:c.jP[null==t?void 0:t.status]})}},{value:"Time",component:e=>{let{data:t}=e;return(0,a.jsx)(a.Fragment,{children:(0,j.i)(t.created_at)})}},{value:"Action",component:e=>{let{data:t}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(o.EY,{id:t.id,setEdit:Z,data:t,setSelected:k,disable:[o.yY]})})}}];return(0,a.jsxs)(a.Fragment,{children:[(P===c.P7||P===c.bk)&&(0,a.jsx)(y,{id:_.id||0,isActive:P===c.P7||P===c.bk,onClose:Z,data:{..._,id:_.id},type:P==c.P7?c.P7:c.bk,urls:P==c.P7?"".concat(t,"/add"):"".concat(t,"/update"),path:t}),(0,a.jsx)("div",{className:"card bg-glass",children:(0,a.jsx)("div",{className:"card-datatable ",children:(0,a.jsxs)("div",{className:"dataTables_wrapper dt-bootstrap5",children:[(0,a.jsx)(d.ZP,{title:"".concat(t),onAddClick:()=>Z(c.P7),onExportClick:()=>{u.Z.download()},disable:[d.bi,d.aO],recall:()=>{x({...c.Wh})}}),(0,a.jsx)(l.ZP,{filter:h,setFilter:x,orderBy:v,disable:[l.dd,l.e_,l.gU]}),(0,a.jsx)(o.ZP,{tableCustomize:S,data:f&&f.list||[],StartIndex:+h.limit*(+g-1)+1||1}),(0,a.jsx)(s.Z,{currentPage:g,limit:h.limit,setCurrentPage:N,total:(null===(e=f.pagination)||void 0===e?void 0:e.total)||0})]})})})]})}}},function(e){e.O(0,[86,743,138,752,291,774,888,179],function(){return e(e.s=71)}),_N_E=e.O()}]);